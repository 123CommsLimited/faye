require 'rubygems'
require 'oyster'
require 'rack'
require File.dirname(__FILE__) + '/../lib/faye'

spec = Oyster.spec do
  name 'faye -- Bayeux protocol server in Ruby'
  
  string  :host, :default => Faye::DAEMON_HOST
  integer :port, :default => Faye::DAEMON_PORT
end

begin
  options = spec.parse
rescue Oyster::HelpRendered
  exit
end

fork do
  Faye.rack_handler.run Faye::RackAdapter.new,
                        :Host => options[:host],
                        :Port => options[:port]
end

